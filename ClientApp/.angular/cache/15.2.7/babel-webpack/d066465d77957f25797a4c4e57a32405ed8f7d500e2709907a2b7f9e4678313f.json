{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../product.service\";\nimport * as i2 from \"../shopping-cart.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/material/form-field\";\nimport * as i6 from \"@angular/material/input\";\nfunction ProductListComponent_div_4_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 10)(1, \"h6\", 11)(2, \"span\", 12);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"p\", 13);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 13);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\", 13);\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function ProductListComponent_div_4_div_6_Template_button_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const product_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r4.addToCart(product_r3));\n    });\n    i0.ɵɵtext(12, \"Add to Cart\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const product_r3 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Name: \", product_r3.name, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Description: \", product_r3.description, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Specifications: \", product_r3.specifications, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Price: $\", i0.ɵɵpipeBind2(10, 4, product_r3.price, \"1.2-2\"), \"\");\n  }\n}\nfunction ProductListComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"div\", 5)(2, \"div\", 6)(3, \"h5\", 7);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 8);\n    i0.ɵɵtemplate(6, ProductListComponent_div_4_div_6_Template, 13, 7, \"div\", 9);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const productGroup_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"Category: \", productGroup_r1[0] == null ? null : productGroup_r1[0].category, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.getFilteredProducts());\n  }\n}\nexport class ProductListComponent {\n  constructor(productService, cartService) {\n    this.productService = productService;\n    this.cartService = cartService;\n    this.products = [];\n    this.groupedProducts = [];\n    this.searchQuery = '';\n  }\n  ngOnInit() {\n    this.productService.getProducts().subscribe(products => {\n      this.products = products.sort((a, b) => a.category.localeCompare(b.category));\n      this.groupedProducts = this.groupProductsByCategory(this.products);\n    });\n  }\n  groupProductsByCategory(products) {\n    const categoriesMap = {};\n    // Initialize categoriesMap with empty arrays for each category\n    products.forEach(product => {\n      if (!categoriesMap[product.category]) {\n        categoriesMap[product.category] = [];\n      }\n    });\n    // Populate categoriesMap with filtered products\n    products.forEach(product => {\n      if (this.getFilteredProducts().includes(product)) {\n        categoriesMap[product.category].push(product);\n      }\n    });\n    // Convert categoriesMap to groupedProducts array\n    return Object.values(categoriesMap);\n  }\n  addToCart(product) {\n    this.cartService.addToCart(product);\n    console.log('Product added to cart:', product);\n  }\n  getFilteredProducts() {\n    return this.products.filter(product => product.name.toLowerCase().includes(this.searchQuery.toLowerCase()) || product.description.toLowerCase().includes(this.searchQuery.toLowerCase()) || product.specifications.toLowerCase().includes(this.searchQuery.toLowerCase()));\n  }\n}\nProductListComponent.ɵfac = function ProductListComponent_Factory(t) {\n  return new (t || ProductListComponent)(i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i2.ShoppingCartService));\n};\nProductListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductListComponent,\n  selectors: [[\"app-product-list\"]],\n  decls: 5,\n  vars: 2,\n  consts: [[1, \"container\", \"mt-3\"], [\"type\", \"text\", \"matInput\", \"\", \"placeholder\", \"Search for products...\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [1, \"row\"], [\"class\", \"col-md-12 mb-4\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-md-12\", \"mb-4\"], [1, \"card\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"vertical-layout\"], [\"class\", \"mb-3 border p-3\", 4, \"ngFor\", \"ngForOf\"], [1, \"mb-3\", \"border\", \"p-3\"], [1, \"card-subtitle\", \"mb-2\", \"text-muted\"], [1, \"highlight\"], [1, \"card-text\"], [1, \"btn\", \"btn-primary\", 3, \"click\"]],\n  template: function ProductListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"mat-form-field\")(2, \"input\", 1);\n      i0.ɵɵlistener(\"ngModelChange\", function ProductListComponent_Template_input_ngModelChange_2_listener($event) {\n        return ctx.searchQuery = $event;\n      })(\"input\", function ProductListComponent_Template_input_input_2_listener() {\n        return ctx.getFilteredProducts();\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(3, \"div\", 2);\n      i0.ɵɵtemplate(4, ProductListComponent_div_4_Template, 7, 2, \"div\", 3);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.searchQuery);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.groupedProducts);\n    }\n  },\n  dependencies: [i3.NgForOf, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel, i5.MatFormField, i6.MatInput, i3.DecimalPipe],\n  styles: [\".highlight[_ngcontent-%COMP%] {\\r\\n  color: red; \\r\\n  font-weight: bold; \\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcHJvZHVjdC1saXN0L3Byb2R1Y3QtbGlzdC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9EQUFvRDtBQUNwRDtFQUNFLFVBQVUsRUFBRSwwREFBMEQ7RUFDdEUsaUJBQWlCLEVBQUUsc0NBQXNDO0FBQzNEIiwic291cmNlc0NvbnRlbnQiOlsiLyogc3JjL2FwcC9wcm9kdWN0LWxpc3QvcHJvZHVjdC1saXN0LmNvbXBvbmVudC5jc3MgKi9cclxuLmhpZ2hsaWdodCB7XHJcbiAgY29sb3I6IHJlZDsgLyogc2F1IG9yaWNlIGFsdMOEwoMgY3Vsb2FyZSBwZSBjYXJlIGRvcmXDiMKZdGkgc8OEwoMgbyBmb2xvc2XDiMKZdGkgKi9cclxuICBmb250LXdlaWdodDogYm9sZDsgLyogb3DDiMKbaW9uYWw6IGZhY2UgdGV4dHVsIG1haSBldmlkZW50ICovXHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","ProductListComponent","constructor","productService","cartService","ngOnInit","getProducts","subscribe","products","sort","a","b","category","localeCompare","groupedProducts","groupProductsByCategory","categoriesMap","forEach","product","getFilteredProducts","includes","push","Object","values","addToCart","console","log","filter","name","toLowerCase","searchQuery","description","specifications","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["F:\\Magazin Online\\Magazin Online\\ClientApp\\src\\app\\product-list\\product-list.component.html","F:\\Magazin Online\\Magazin Online\\ClientApp\\src\\app\\product-list\\product-list.component.ts"],"sourcesContent":["<div class=\"container mt-3\">\r\n  <mat-form-field>\r\n    <input type=\"text\" matInput [(ngModel)]=\"searchQuery\" (input)=\"getFilteredProducts()\" placeholder=\"Search for products...\">\r\n  </mat-form-field>\r\n</div>\r\n\r\n<div class=\"row\">\r\n  <div *ngFor=\"let productGroup of groupedProducts\" class=\"col-md-12 mb-4\">\r\n    <div class=\"card\">\r\n      <div class=\"card-body\">\r\n        <h5 class=\"card-title\">Category: {{ productGroup[0]?.category }}</h5>\r\n        <div class=\"vertical-layout\">\r\n          <div *ngFor=\"let product of getFilteredProducts()\" class=\"mb-3 border p-3\">\r\n            <h6 class=\"card-subtitle mb-2 text-muted\">\r\n              <span class=\"highlight\">Name: {{ product.name }}</span>\r\n            </h6>\r\n            <p class=\"card-text\">Description: {{ product.description }}</p>\r\n            <p class=\"card-text\">Specifications: {{ product.specifications }}</p>\r\n            <p class=\"card-text\">Price: ${{ product.price | number:'1.2-2' }}</p>\r\n            <button (click)=\"addToCart(product)\" class=\"btn btn-primary\">Add to Cart</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ProductService, Product } from '../product.service';\r\nimport { ShoppingCartService } from '../shopping-cart.service';\r\n\r\n@Component({\r\n  selector: 'app-product-list',\r\n  templateUrl: './product-list.component.html',\r\n  styleUrls: ['./product-list.component.css'],\r\n})\r\nexport class ProductListComponent implements OnInit {\r\n  products: Product[] = [];\r\n  groupedProducts: Product[][] = [];\r\n  searchQuery: string = '';\r\n\r\n  constructor(private productService: ProductService, private cartService: ShoppingCartService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.productService.getProducts().subscribe((products) => {\r\n      this.products = products.sort((a, b) => a.category.localeCompare(b.category));\r\n      this.groupedProducts = this.groupProductsByCategory(this.products);\r\n    });\r\n  }\r\n\r\n  private groupProductsByCategory(products: Product[]): Product[][] {\r\n    const categoriesMap: { [category: string]: Product[] } = {};\r\n\r\n    // Initialize categoriesMap with empty arrays for each category\r\n    products.forEach((product) => {\r\n      if (!categoriesMap[product.category]) {\r\n        categoriesMap[product.category] = [];\r\n      }\r\n    });\r\n\r\n    // Populate categoriesMap with filtered products\r\n    products.forEach((product) => {\r\n      if (this.getFilteredProducts().includes(product)) {\r\n        categoriesMap[product.category].push(product);\r\n      }\r\n    });\r\n\r\n    // Convert categoriesMap to groupedProducts array\r\n    return Object.values(categoriesMap);\r\n  }\r\n\r\n  addToCart(product: Product): void {\r\n    this.cartService.addToCart(product);\r\n    console.log('Product added to cart:', product);\r\n  }\r\n\r\n  getFilteredProducts(): Product[] {\r\n    return this.products.filter(\r\n      (product) =>\r\n        product.name.toLowerCase().includes(this.searchQuery.toLowerCase()) ||\r\n        product.description.toLowerCase().includes(this.searchQuery.toLowerCase()) ||\r\n        product.specifications.toLowerCase().includes(this.searchQuery.toLowerCase())\r\n    );\r\n  }\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}